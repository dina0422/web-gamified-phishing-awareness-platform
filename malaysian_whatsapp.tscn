[gd_scene load_steps=2 format=3 uid="uid://bmocgy3xmyt1h"]

[sub_resource type="GDScript" id="GDScript_djkj4"]
script/source = "extends Control

# Malaysian WhatsApp Phishing Simulation
# Simulates phishing attempts via WhatsApp messages

signal answer_selected(is_correct: bool)

var user_answered := false

func _ready() -> void:
	pass

func _on_phishing_button_pressed() -> void:
	if user_answered:
		return
	
	user_answered = true
	show_feedback(true)
	answer_selected.emit(true)

func _on_legit_button_pressed() -> void:
	if user_answered:
		return
	
	user_answered = true
	show_feedback(false)
	answer_selected.emit(false)

func show_feedback(is_correct: bool) -> void:
	var feedback_panel = Panel.new()
	feedback_panel.set_anchors_preset(Control.PRESET_CENTER)
	feedback_panel.position = Vector2(200, 100)
	feedback_panel.size = Vector2(700, 500)
	add_child(feedback_panel)
	
	var feedback_container = VBoxContainer.new()
	feedback_container.set_anchors_and_offsets_preset(Control.PRESET_FULL_RECT)
	feedback_panel.add_child(feedback_container)
	
	var margin = MarginContainer.new()
	margin.set(\"theme_override_constants/margin_left\", 30)
	margin.set(\"theme_override_constants/margin_top\", 30)
	margin.set(\"theme_override_constants/margin_right\", 30)
	margin.set(\"theme_override_constants/margin_bottom\", 30)
	feedback_container.add_child(margin)
	
	var content = VBoxContainer.new()
	margin.add_child(content)
	
	var title = Label.new()
	title.add_theme_font_size_override(\"font_size\", 24)
	title.horizontal_alignment = HORIZONTAL_ALIGNMENT_CENTER
	
	if is_correct:
		title.text = \"‚úÖ BETUL! Ini Phishing WhatsApp!\"
		title.add_theme_color_override(\"font_color\", Color(0, 0.7, 0))
	else:
		title.text = \"‚ùå Salah. Ini Memang Phishing!\"
		title.add_theme_color_override(\"font_color\", Color(0.8, 0, 0))
	
	content.add_child(title)
	
	var spacer1 = Control.new()
	spacer1.custom_minimum_size = Vector2(0, 20)
	content.add_child(spacer1)
	
	var feedback_text = RichTextLabel.new()
	feedback_text.custom_minimum_size = Vector2(0, 250)
	feedback_text.bbcode_enabled = true
	feedback_text.fit_content = true
	
	if is_correct:
		feedback_text.text = \"\"\"[color=#000000][b]Kenapa ini phishing WhatsApp?[/b]

[color=#ff0000]1. Bank TIDAK akan guna WhatsApp:[/color]
   ‚Ä¢ Bank menggunakan saluran rasmi (email, portal, hotline)
   ‚Ä¢ WhatsApp mudah dipalsukan
   ‚Ä¢ Nombor boleh dibeli oleh sesiapa sahaja

[color=#ff0000]2. Taktik menakutkan:[/color]
   ‚Ä¢ \"2 JAM sahaja\"
   ‚Ä¢ \"akaun ditutup secara kekal\"
   ‚Ä¢ Mencipta panik supaya mangsa bertindak cepat

[color=#ff0000]3. Domain mencurigakan:[/color]
   ‚Ä¢ rhbbank-secure.com ‚Üê bukan domain rasmi!
   ‚Ä¢ Domain rasmi RHB: rhbgroup.com atau rhbbank.com.my

[color=#ff0000]4. Mesej tidak dipersonalisasikan:[/color]
   ‚Ä¢ Tiada nama anda
   ‚Ä¢ Tiada nombor akaun sebenar
   ‚Ä¢ Mesej generik

[b]Apa yang patut anda buat:[/b]
‚úì ABAIKAN mesej ini
‚úì JANGAN klik sebarang pautan
‚úì Hubungi RHB hotline: 03-9206 8118
‚úì Report nombor WhatsApp ini
‚úì Log masuk ke RHB portal rasmi untuk semak akaun[/color]\"\"\"
	else:
		feedback_text.text = \"\"\"[color=#000000][b]Ini MEMANG phishing! Lihat tanda-tanda:[/b]

üö© [color=#ff0000]Bank tidak guna WhatsApp untuk hal keselamatan[/color]
   ‚Ä¢ RHB Bank menggunakan email rasmi (@rhbgroup.com)
   ‚Ä¢ Atau hubungi terus melalui hotline yang sah
   ‚Ä¢ Bukan melalui WhatsApp dari nombor tak dikenali

üö© [color=#ff0000]Pautan mencurigakan[/color]
   ‚Ä¢ rhbbank-secure.com ‚Üê PALSU!
   ‚Ä¢ Domain rasmi: rhbgroup.com, rhbbank.com.my
   ‚Ä¢ Scammer sering guna domain serupa tapi palsu

üö© [color=#ff0000]Ugutan dan tekanan masa[/color]
   ‚Ä¢ \"2 JAM\"
   ‚Ä¢ \"ditutup secara kekal\"
   ‚Ä¢ Taktik untuk buat anda panik

üö© [color=#ff0000]Tiada maklumat peribadi[/color]
   ‚Ä¢ Bank akan sebut nama anda
   ‚Ä¢ Ada nombor akaun
   ‚Ä¢ Mesej ini terlalu umum

[b]Cara melindungi diri:[/b]
1. SENTIASA ragu-ragu dengan mesej mendesak
2. JANGAN klik pautan dari WhatsApp/SMS tak dijangka
3. Hubungi bank terus melalui nombor rasmi
4. Semak akaun anda melalui portal rasmi
5. Report nombor WhatsApp mencurigakan[/color]\"\"\"
	
	content.add_child(feedback_text)
	
	var spacer2 = Control.new()
	spacer2.custom_minimum_size = Vector2(0, 10)
	content.add_child(spacer2)
	
	var close_button = Button.new()
	close_button.text = \"Tutup\"
	close_button.custom_minimum_size = Vector2(150, 40)
	close_button.size_flags_horizontal = Control.SIZE_SHRINK_CENTER
	close_button.pressed.connect(func(): 
		feedback_panel.queue_free()
	)
	content.add_child(close_button)

# Load different WhatsApp phishing scenarios
func load_scenario(scenario_id: int) -> void:
	match scenario_id:
		0:
			load_rhb_scenario()
		1:
			load_parcel_delivery_scenario()
		2:
			load_job_offer_scenario()
		3:
			load_lucky_draw_scenario()
		_:
			load_rhb_scenario()

func load_rhb_scenario() -> void:
	# Default scenario, already loaded
	pass

func load_parcel_delivery_scenario() -> void:
	var contact_name = $PhoneFrame/Screen/WhatsAppUI/Header/HBoxContainer/ContactInfo/ContactName
	var msg1 = $PhoneFrame/Screen/WhatsAppUI/ChatBackground/ScrollContainer/MarginContainer/ChatMessages/Message1/MessageText
	var msg2 = $PhoneFrame/Screen/WhatsAppUI/ChatBackground/ScrollContainer/MarginContainer/ChatMessages/Message2/MessageText
	
	contact_name.text = \"J&T Express\"
	msg1.text = \"[color=#000000]Hai! Parcel anda dengan tracking number JT1234567890MY telah sampai di cawangan kami.[/color]\"
	msg2.text = \"\"\"[color=#000000]Tetapi anda perlu bayar yuran kastam RM 8.90 terlebih dahulu.

Klik link ni untuk payment:
[color=#0066cc][u]jnt-express-my.com/pay[/u][/color]

‚ö†Ô∏è Kalau tak bayar dalam 24 jam, parcel akan return ke pengirim ya![/color]\"\"\"

func load_job_offer_scenario() -> void:
	var contact_name = $PhoneFrame/Screen/WhatsAppUI/Header/HBoxContainer/ContactInfo/ContactName
	var msg1 = $PhoneFrame/Screen/WhatsAppUI/ChatBackground/ScrollContainer/MarginContainer/ChatMessages/Message1/MessageText
	var msg2 = $PhoneFrame/Screen/WhatsAppUI/ChatBackground/ScrollContainer/MarginContainer/ChatMessages/Message2/MessageText
	
	contact_name.text = \"HR Petronas\"
	msg1.text = \"[color=#000000]Selamat sejahtera! Kami dari Petronas HR Department ingin menawarkan anda peluang pekerjaan.[/color]\"
	msg2.text = \"\"\"[color=#000000][b]Jawatan: IT Executive[/b]
[b]Gaji: RM 12,000 - RM 15,000[/b]
[b]Lokasi: KLCC, Kuala Lumpur[/b]

Anda dipilih berdasarkan resume yang dihantar. Untuk proses selanjutnya, sila isi borang di:

[color=#0066cc][u]petronas-career-portal.com/apply[/u][/color]

Sila bayar yuran pemprosesan RM 150 untuk pengesahan jawatan.[/color]\"\"\"

func load_lucky_draw_scenario() -> void:
	var contact_name = $PhoneFrame/Screen/WhatsAppUI/Header/HBoxContainer/ContactInfo/ContactName
	var msg1 = $PhoneFrame/Screen/WhatsAppUI/ChatBackground/ScrollContainer/MarginContainer/ChatMessages/Message1/MessageText
	var msg2 = $PhoneFrame/Screen/WhatsAppUI/ChatBackground/ScrollContainer/MarginContainer/ChatMessages/Message2/MessageText
	
	contact_name.text = \"Shopee Malaysia\"
	msg1.text = \"[color=#000000]üéâüéä TAHNIAH! Anda telah memenangi Lucky Draw Shopee Malaysia![/color]\"
	msg2.text = \"\"\"[color=#000000][b]üèÜ HADIAH ANDA:[/b]
‚Ä¢ iPhone 15 Pro Max
‚Ä¢ RM 10,000 Shopee Wallet Credit

Untuk claim hadiah, klik link dan isi maklumat:
[color=#0066cc][u]shopee-lucky-winner.com/claim[/u][/color]

‚ö†Ô∏è Link ini sah untuk 48 jam sahaja!
Selepas itu, hadiah akan diberikan kepada pemenang lain.[/color]\"\"\"
"

[node name="MalaysianWhatsApp" type="Control"]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
script = SubResource("GDScript_djkj4")

[node name="Background" type="ColorRect" parent="."]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
color = Color(0.878431, 0.878431, 0.819608, 1)

[node name="PhoneFrame" type="Panel" parent="."]
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -170.0
offset_top = -285.0
offset_right = 170.0
offset_bottom = 285.0
grow_horizontal = 2
grow_vertical = 2

[node name="ColorRect" type="ColorRect" parent="PhoneFrame"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
color = Color(0, 0, 0, 1)

[node name="Screen" type="Panel" parent="PhoneFrame"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = 10.0
offset_top = 10.0
offset_right = -10.0
offset_bottom = -10.0
grow_horizontal = 2
grow_vertical = 2

[node name="WhatsAppUI" type="VBoxContainer" parent="PhoneFrame/Screen"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2

[node name="Header" type="Panel" parent="PhoneFrame/Screen/WhatsAppUI"]
custom_minimum_size = Vector2(0, 60)
layout_mode = 2

[node name="ColorRect" type="ColorRect" parent="PhoneFrame/Screen/WhatsAppUI/Header"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
color = Color(0.0392157, 0.513726, 0.392157, 1)

[node name="HBoxContainer" type="HBoxContainer" parent="PhoneFrame/Screen/WhatsAppUI/Header"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2

[node name="BackButton" type="Button" parent="PhoneFrame/Screen/WhatsAppUI/Header/HBoxContainer"]
custom_minimum_size = Vector2(40, 0)
layout_mode = 2
text = "‚Üê"

[node name="ContactInfo" type="VBoxContainer" parent="PhoneFrame/Screen/WhatsAppUI/Header/HBoxContainer"]
layout_mode = 2
size_flags_horizontal = 3

[node name="ContactName" type="Label" parent="PhoneFrame/Screen/WhatsAppUI/Header/HBoxContainer/ContactInfo"]
layout_mode = 2
theme_override_colors/font_color = Color(1, 1, 1, 1)
theme_override_font_sizes/font_size = 16
text = "RHB Bank"

[node name="Status" type="Label" parent="PhoneFrame/Screen/WhatsAppUI/Header/HBoxContainer/ContactInfo"]
layout_mode = 2
theme_override_colors/font_color = Color(0.8, 0.8, 0.8, 1)
theme_override_font_sizes/font_size = 11
text = "online"

[node name="ChatBackground" type="ColorRect" parent="PhoneFrame/Screen/WhatsAppUI"]
layout_mode = 2
size_flags_vertical = 3
color = Color(0.878431, 0.878431, 0.819608, 1)

[node name="ScrollContainer" type="ScrollContainer" parent="PhoneFrame/Screen/WhatsAppUI/ChatBackground"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2

[node name="MarginContainer" type="MarginContainer" parent="PhoneFrame/Screen/WhatsAppUI/ChatBackground/ScrollContainer"]
layout_mode = 2
size_flags_horizontal = 3
size_flags_vertical = 3
theme_override_constants/margin_left = 10
theme_override_constants/margin_top = 10
theme_override_constants/margin_right = 10
theme_override_constants/margin_bottom = 10

[node name="ChatMessages" type="VBoxContainer" parent="PhoneFrame/Screen/WhatsAppUI/ChatBackground/ScrollContainer/MarginContainer"]
layout_mode = 2
size_flags_horizontal = 3

[node name="Message1" type="Panel" parent="PhoneFrame/Screen/WhatsAppUI/ChatBackground/ScrollContainer/MarginContainer/ChatMessages"]
custom_minimum_size = Vector2(0, 100)
layout_mode = 2

[node name="ColorRect" type="ColorRect" parent="PhoneFrame/Screen/WhatsAppUI/ChatBackground/ScrollContainer/MarginContainer/ChatMessages/Message1"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2

[node name="MessageText" type="RichTextLabel" parent="PhoneFrame/Screen/WhatsAppUI/ChatBackground/ScrollContainer/MarginContainer/ChatMessages/Message1"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = 10.0
offset_top = 5.0
offset_right = -10.0
offset_bottom = -20.0
grow_horizontal = 2
grow_vertical = 2
bbcode_enabled = true
text = "[color=#000000]Selamat petang! Kami dari RHB Bank ingin memaklumkan bahawa akaun anda telah dibekukan sementara kerana aktiviti mencurigakan.[/color]"
fit_content = true

[node name="Time" type="Label" parent="PhoneFrame/Screen/WhatsAppUI/ChatBackground/ScrollContainer/MarginContainer/ChatMessages/Message1"]
layout_mode = 1
anchors_preset = 3
anchor_left = 1.0
anchor_top = 1.0
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = -60.0
offset_top = -18.0
offset_right = -10.0
offset_bottom = -5.0
grow_horizontal = 0
grow_vertical = 0
theme_override_colors/font_color = Color(0.5, 0.5, 0.5, 1)
theme_override_font_sizes/font_size = 10
text = "14:23"
horizontal_alignment = 2

[node name="Spacer1" type="Control" parent="PhoneFrame/Screen/WhatsAppUI/ChatBackground/ScrollContainer/MarginContainer/ChatMessages"]
custom_minimum_size = Vector2(0, 5)
layout_mode = 2

[node name="Message2" type="Panel" parent="PhoneFrame/Screen/WhatsAppUI/ChatBackground/ScrollContainer/MarginContainer/ChatMessages"]
custom_minimum_size = Vector2(0, 150)
layout_mode = 2

[node name="ColorRect" type="ColorRect" parent="PhoneFrame/Screen/WhatsAppUI/ChatBackground/ScrollContainer/MarginContainer/ChatMessages/Message2"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2

[node name="MessageText" type="RichTextLabel" parent="PhoneFrame/Screen/WhatsAppUI/ChatBackground/ScrollContainer/MarginContainer/ChatMessages/Message2"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = 8.0
offset_top = 6.0
offset_right = -12.0
offset_bottom = 109.0
grow_horizontal = 2
grow_vertical = 2
bbcode_enabled = true
text = "[color=#000000][b]üö® TINDAKAN SEGERA DIPERLUKAN[/b]

Sila klik pautan di bawah untuk mengesahkan identiti anda dalam masa 2 JAM:

[color=#0066cc][u]rhbbank-secure.com/verify[/u][/color]

Kegagalan berbuat demikian akan menyebabkan akaun anda ditutup secara kekal.[/color]"
fit_content = true

[node name="Time" type="Label" parent="PhoneFrame/Screen/WhatsAppUI/ChatBackground/ScrollContainer/MarginContainer/ChatMessages/Message2"]
layout_mode = 1
anchors_preset = 3
anchor_left = 1.0
anchor_top = 1.0
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = -60.0
offset_top = -18.0
offset_right = -10.0
offset_bottom = -5.0
grow_horizontal = 0
grow_vertical = 0
theme_override_colors/font_color = Color(0.5, 0.5, 0.5, 1)
theme_override_font_sizes/font_size = 10
text = "14:24"
horizontal_alignment = 2

[node name="Spacer2" type="Control" parent="PhoneFrame/Screen/WhatsAppUI/ChatBackground/ScrollContainer/MarginContainer/ChatMessages"]
custom_minimum_size = Vector2(0, 20)
layout_mode = 2

[node name="ActionButtons" type="HBoxContainer" parent="PhoneFrame/Screen/WhatsAppUI/ChatBackground/ScrollContainer/MarginContainer/ChatMessages"]
layout_mode = 2
alignment = 1

[node name="PhishingButton" type="Button" parent="PhoneFrame/Screen/WhatsAppUI/ChatBackground/ScrollContainer/MarginContainer/ChatMessages/ActionButtons"]
custom_minimum_size = Vector2(150, 40)
layout_mode = 2
text = "üé£ Phishing"

[node name="LegitButton" type="Button" parent="PhoneFrame/Screen/WhatsAppUI/ChatBackground/ScrollContainer/MarginContainer/ChatMessages/ActionButtons"]
custom_minimum_size = Vector2(150, 40)
layout_mode = 2
text = "‚úÖ Sah"

[node name="InfoPanel" type="Panel" parent="."]
layout_mode = 1
anchors_preset = 7
anchor_left = 0.5
anchor_top = 1.0
anchor_right = 0.5
anchor_bottom = 1.0
offset_left = -300.0
offset_top = -120.0
offset_right = 300.0
offset_bottom = -20.0
grow_horizontal = 2
grow_vertical = 0

[node name="MarginContainer" type="MarginContainer" parent="InfoPanel"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
theme_override_constants/margin_left = 15
theme_override_constants/margin_top = 15
theme_override_constants/margin_right = 15
theme_override_constants/margin_bottom = 15

[node name="InfoLabel" type="Label" parent="InfoPanel/MarginContainer"]
layout_mode = 2
theme_override_font_sizes/font_size = 12
text = "üí° Tips: Bank tidak akan menghubungi anda melalui WhatsApp untuk hal-hal berkaitan keselamatan akaun. Mereka akan menggunakan saluran rasmi seperti email rasmi atau telefon ke nombor berdaftar."
autowrap_mode = 3

[connection signal="pressed" from="PhoneFrame/Screen/WhatsAppUI/ChatBackground/ScrollContainer/MarginContainer/ChatMessages/ActionButtons/PhishingButton" to="." method="_on_phishing_button_pressed"]
[connection signal="pressed" from="PhoneFrame/Screen/WhatsAppUI/ChatBackground/ScrollContainer/MarginContainer/ChatMessages/ActionButtons/LegitButton" to="." method="_on_legit_button_pressed"]
